\chapter{関連研究}
\label{chapter:related}

\section{ステッパの実装}
\label{section:stepper__related}

ステッパはもともと Clements ら \cite{clements01} によって
Racket 言語の教育用に制限された構文に対して作られた。
Clements らはステッパを作るために
(i) 全ての簡約を正しい順番で表示する
(ii) プログラム全体を再構成するための情報にアクセスできる
ことが必要だと指摘した。
この考えに基づいて、Clements らは以下の 3 つの関数を用いてステッパ関数を定義した。
\begin{itemize}
\item ブレークポイント挿入関数：簡約が行われる全ての部分にブレークポイントを設定する
\item 注釈関数：適切なコンテキストを得られるようにプログラムに注釈を加える
% 評価コンテキストを適切に操作するようにユーザープログラムを装飾します
\item 再構成関数：スタックに蓄積されたコンテキストからプログラム全体を再構成する
\end{itemize}
Clements らがブレークポイントを挿入した箇所は
我々がという、ステップを出力する関数 \texttt{memo} を挿入した箇所と対応する。
注釈関数について、Clements らは Racket 組み込みの関数
\texttt{w-c-m} (\texttt{"with-continuation-mark"}■■) と
\texttt{c-c-m} (\texttt{"current-continuation-marks"})
を使ってコンテキストを操作している。
\texttt{w-c-m} は我々がコンテキストを1層深く広げる操作に対応していて、
\texttt{c-c-m} はスタックのコンテキストフレームを全て取得するために使われる。
再構成関数は、
我々が関数 \texttt{memo} 内で使用する関数 \texttt{plug} と同じ働きをする。

Cong と Asai \cite{Cong16} は、
コンテキストの記録およびそこから再構成したプログラムの出力を
限定継続のオペレータ shift/reset を用いて行い、ステッパを実装した。

Whitington と Ridge \cite{EPTCS294.3} は
small-step のインタプリタを直接書くことで
OCaml に対するステッパを実装した。

\section{ステッパと似た■■ツール}

PLT Redex \cite{felleisen09}は操作的意味論の形式化のための言語で、
文法と簡約規則を定義できるようになっており、DrRacket のステッパを継承している。
さらに、一画面の中に各ステップでのプログラムを配置し、
あるプログラムが１ステップ簡約されて別のプログラムになることを矢印で表したグラフを表示する。
これはより視覚的に簡約の様子を表すことができるほか、
各矢印にそのステップの簡約規則が添えられているのでよりステップを辿りやすい。
しかし、複数のステップのプログラムが同じ画面に表示されている上に
簡約が起こる部分式が強調されていないので、
長いプログラムをステップ実行すると見づらくなってしまう。

根岸ら\cite{NI2009}の関数型言語 Haskell のデバッガフロントエンドは、
一般的なデバッガの実行方法が通用しない遅延評価型言語の
グラフィカルなユーザインタフェースでのステップ実行を含むデバッガ操作を可能にした。
デバッガがブラウザ上で利用できるようになっており、
DrRacket や本研究のステッパと同様に各ステップでのプログラムを
評価中の式をハイライトしながら表示する。
実行するファイルや、ブレイクポイントをどの関数に設定するか、
ステップ実行するか次のブレイクポイントまで実行するか
などといった設定を、ブラウザ上のボタンなどをクリックすることで行うことができる。
デバッガのインタフェースでの本研究との違いは、
根岸ら\cite{NI2009}のデバッガではブレイクポイントをユーザが簡単に設定できるのに対して、
本研究ではブレイクポイントは自動的に全ての簡約基に設定され、
ユーザは詳細に実行のしかたを決められない代わりに「次のステップ」「前のステップ」
などのボタンを押すのみのより簡単な操作のみでステップ実行をすることができることである。

\section{ステップ実行によるプログラミング学習}

Tunnel Wilson ら \cite{tunnell18} は、
代数学的ステッパの出力のような内容を学生に手書きで書かせることによって、
学生がプログラムの実行のされかたをどのように理解しているか、
どのような構文のステップの書き下しができないかといった傾向を分析した。

\section{algebraic effects}
\label{section:algebraic effects__related}

本論文では algebraic effects に対する意味論を、
big-step で書かれた、ハンドラ内の実行について CPS になっているインタプリタで定義する。
Kammar ら \cite{10.1145/2500365.2500590} は small-step で意味論を与えた。
Hillerstr{\"o}m ら \cite{e6cb0c3222794e48bf38cf44e46fe4aa} は
CPS による意味論を与えたが、入力言語を A-正規形に制限しているのに加え、
継続がフレームのリストで与えられており、通常の CPS インタプリタにはなっていない。

上記以外の algebraic effects に関する研究としては、ハンドラの挙動が異
なる shallow ハンドラの研究 \cite{10.1007/978-3-030-02768-1_22} や
algebraic effects を含むプログラムに関する論理関係を
定義する研究 \cite{10.1145/3158096} などがあげられる。本論文で扱ってい
るハンドラは従来の deep ハンドラである。shallow ハンドラにも対応できると
考えているが、これは今後の課題である。
